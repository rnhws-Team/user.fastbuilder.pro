"use strict";(self.webpackChunkwebpages=self.webpackChunkwebpages||[]).push([[475],{1475:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});var n=t(865),r=t.n(n),s=t(578),i=t(2641);let l={gamenameinputcontent:"",isgamenamesetfailed:!1,monthly_plan_duration:0,slots:[],helpername:"",helpername_set_error:"",helperuserbtntitle:"",helperloaded:!1,helperRealnameUrl:"",helperCreated:!1,helperDefaultButtonWorking:!1,acceptWorldChat:!1,changePassword_working:!1,gamename_apply_btn_working:!1,changePassword_inputs:["","",""],binded_mail:null,email_bind_val:"",email_bind_captcha_val:"",email_bind_working:!1,bot_linkCode:"",bot_linkCode_displayOrdered:!1,is_commercial_2022:!1,is_2fa_enabled:!1,is_2fa_in_progress:!1,is_rate_limited:!1,captchaRand:0,rate_limit_waiving_in_progress:!1,oninit:async()=>{l.captchaRand=Math.random(),l.is_2fa_in_progress=!1;let e=await i.Z.FetchProfileGeneral();l.is_2fa_enabled=e.is_2fa,l.bot_linkCode=e.blc,l.gamenameinputcontent=e.cn_username,l.slots=e.slots,e.binded_mail?l.binded_mail=e.binded_mail:l.binded_mail=null,l.monthly_plan_duration=e.monthly_plan_duration,l.is_rate_limited=e.is_rate_limited,r().redraw();let a=await i.Z.GetHelperStatus();l.helpername=a.username,l.helperCreated=a.set,l.helperRealnameUrl=a.realname_addr||"",(a.realname_addr||l.helperCreated||l.helpername||!1===a.set)&&(l.helperloaded=!0),r().redraw()},view:e=>{let a=[];for(let e in l.slots){let t=parseInt(e),n=l.slots[e];n.walked||n.canchange||(n.locked?n.sid+="|固定slot，不可修改":n.sid+=`|${n.ato}天后方可修改`,n.walked=!0),a.push(r()("tr",r()("td",r()(s.ZP.doClassReplace("input.userProfile-form-input.form-input.ember-text-field.ember-view"),{value:l.slots[t].sid,disabled:!l.slots[t].canchange,oninput:e=>{l.slots[t].sid=e.target.value}})),r()("td",n.locked?"固定":"可变"),r()("td",n.canchange?r()(s.ZP.button,{disabled:l.slots[t].isProcessing,onclick:e=>{e.preventDefault(),l.slots[t].isProcessing=!0,(async()=>{if(!await s.ZP.question("提示",`您正将槽位内容更改为"${l.slots[t].sid}"`))return l.slots[t].isProcessing=!1,void r().redraw();let e=await i.Z.SaveSlot(l.slots[t].slotid,l.slots[t].sid,!1);if(!e.success)return await s.ZP.showAlert("错误","未能应用操作："+e.message),l.slots[t].isProcessing=!1,void r().redraw();l.slots=e.slots,r().redraw()})()}},"保存"):null,n.locked&&!n.canchange?r()(s.ZP.button,{disabled:l.slots[t].isProcessing,onclick:e=>{e.preventDefault(),l.slots[t].isProcessing=!0,s.ZP.question("警告","确定要删除这个槽位吗?",!0).then((async e=>{if(!e)return l.slots[t].isProcessing=!1,void r().redraw();await i.Z.SaveSlot(l.slots[t].slotid,"",!0),l.slots[t].isProcessing=!1,l.oninit()}))}},"删除"):null)))}return r()(s.ZP.frame,{pageName:"用户信息",pageIcon:'<svg class="sectionTitle-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 448 512"><path d="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"></path></svg>'},r()(s.ZP.section,{title:"游戏名"},l.isgamenamesetfailed?r()("p",{style:{color:"red"}},"设置失败"):null,r()(s.ZP.sectionGeneralText,"在此处设置客户端默认游戏名，可以不设置。"),r()(s.ZP.form,r()(s.ZP.formInput,{value:l.gamenameinputcontent,oninput:e=>{l.gamenameinputcontent=e.target.value}},"游戏名")),r()(s.ZP.button,{disabled:l.gamename_apply_btn_working,onclick:e=>{e.preventDefault(),l.gamename_apply_btn_working=!0,async function(){let e=await i.Z.SaveClientUsername(l.gamenameinputcontent);e.success?(l.gamename_apply_btn_working=!1,l.gamenameinputcontent=e.namearray[0],r().redraw()):(l.gamename_apply_btn_working=!1,l.isgamenamesetfailed=!0,r().redraw())}()}},"应用")),r()(s.ZP.section,{title:"月额Plan"},l.is_commercial_2022?r()("p",{style:{color:"red"}},"由于您的账号是商业账号，在有效期过期后数日后将会被删除。"):null,r()("p",-1===l.monthly_plan_duration?"永久":`剩余 ${l.monthly_plan_duration} 天有效`)),r()(s.ZP.section,{title:"租赁服绑定"},r()(s.ZP.sectionGeneralText,"请在下方列表中设定您的常用租赁服，每个位置(slot)均在设置后1个月内不可变。您仅可以进入已在这里绑定的租赁服。"),r()(s.ZP.sectionGeneralText,"slot 可自商城购买。"),r()(s.ZP.form,r()("div.userProfile-form-item",r()("table",r()("tr",r()("th","服务器号"),r()("th","类型"),r()("th","操作")),a)))),r()(s.ZP.section,{title:"fbtoken"},r()(s.ZP.sectionGeneralText,"fbtoken 是 PhoenixBuilder 用于登入至您的 FastBuilder 用户中心账户的凭证。"),r()(s.ZP.sectionGeneralText,"点击下方按钮获取。"),r()(s.ZP.button,{onclick:e=>{location.href=i.Z.GetAPI("get_phoenix_token")}},"获取")),r()(s.ZP.section,{title:"辅助用户"},l.helperloaded?[r()({view:e=>0===l.helpername_set_error.length?null:r()("p",{style:{color:"red"}},l.helpername_set_error)}),r()(s.ZP.sectionGeneralText,["辅助用户是用于进入您的租赁服完成操作的",r()("b","机器人用户"),"。","辅助用户之创建是 PhoenixBuilder 正常工作的必要条件。","当您创建辅助用户后，可能需要刷新页面才可进行网易实名操作。"]),l.helperCreated&&0===l.helperRealnameUrl.length?r()(s.ZP.formInput,{value:l.helpername,oninput:e=>{l.helpername=e.target.value}},"辅助用户名称"):null,0===l.helperRealnameUrl.length?r()(s.ZP.button,{disabled:l.helperDefaultButtonWorking,onclick:e=>{e.preventDefault(),l.helpername_set_error="",l.helperDefaultButtonWorking=!0,async function(){let e=await i.Z.ChangeHelperNameOrCreateHelper(l.helpername);if(!e.success)return e.verify_url&&s.ZP.showIframe("网易验证码验证",e.verify_url),l.helpername_set_error=e.message,l.helperDefaultButtonWorking=!1,void r().redraw();if(l.helperDefaultButtonWorking=!1,e.need_realname){l.helperloaded=!1,r().redraw();let e=await i.Z.GetHelperStatus();l.helpername=e.username,l.helperCreated=e.set,l.helperRealnameUrl=e.realname_addr,l.helperloaded=!0}r().redraw()}()}},l.helperCreated?"更改昵称":"创建辅助用户"):r()(s.ZP.abutton,{href:l.helperRealnameUrl,target:"_blank"},"网易实名认证")]:r()("p","请稍候，正在加载")),r()(s.ZP.section,{title:"双重验证"},r()(s.ZP.sectionGeneralText,"双重验证可以防止未经授权的人登入你的账号。双重验证使用密码器生成的一次性密码。"),r()(s.ZP.button,{disabled:l.is_2fa_in_progress,onclick:()=>{l.is_2fa_enabled?(async()=>{if(!await s.ZP.question("关闭二重验证","确认关闭二重验证？",!0))return;l.is_2fa_in_progress=!0,r().redraw();let e=await i.Z.TurnOff2FA();l.is_2fa_in_progress=!1,e.success?(l.is_2fa_enabled=!1,r().redraw()):r().redraw()})():(l.is_2fa_in_progress=!0,(async()=>{let e=await i.Z.Kickstart2FA();if(l.is_2fa_in_progress=!1,!e.success)return s.ZP.showAlert("错误",e.message);let a=await s.ZP.getInput("启用双重验证",[r()("p","请使用 Google Authenticator (或任意密码器) 扫描以下二维码"),r()("div",r()("img",{src:e.qrcode})),r()("p","或者输入这段文字:"),r()("p",r()("b",e.plainkey)),r()("p","完成后，你会看到对应验证码，请将其输入到下方文本框内。")],"验证码",!1,!1);if(!1===a)return;l.is_2fa_in_progress=!0,r().redraw();let t=await i.Z.FinishRegistering2FA(a);if(l.is_2fa_in_progress=!1,!t.success)return s.ZP.showAlert("错误",t.message);l.is_2fa_enabled=!0,await s.ZP.showAlert("成功","您再次登录时将被要求输入验证码。")})())}},l.is_2fa_enabled?"禁用":"启用")),r()(s.ZP.section,{title:"密码"},r()(s.ZP.sectionGeneralText,"更改用户中心的登录密码。"),r()(s.ZP.formInput,{isPassword:!0,value:l.changePassword_inputs[0],oninput:e=>{l.changePassword_inputs[0]=e.target.value}},"原密码"),r()(s.ZP.formInput,{isPassword:!0,value:l.changePassword_inputs[1],oninput:e=>{l.changePassword_inputs[1]=e.target.value}},"新密码"),r()(s.ZP.formInput,{isPassword:!0,value:l.changePassword_inputs[2],oninput:e=>{l.changePassword_inputs[2]=e.target.value}},"确认新密码"),r()(s.ZP.button,{disabled:l.changePassword_working,onclick:e=>{if(e.preventDefault(),l.changePassword_inputs[1]!==l.changePassword_inputs[2])return s.ZP.showAlert("错误","新密码两次输入不一致。");l.changePassword_working=!0,async function(){let e=await i.Z.ChangePassword(l.changePassword_inputs[0],l.changePassword_inputs[1]);if(!e.success)return s.ZP.showAlert("错误",e.message),l.changePassword_working=!1,void r().redraw();l.changePassword_working=!1,r().route.set("/login"),r().redraw()}()}},"更改")),r()(s.ZP.section,{title:"机器人链接口令"},r()(s.ZP.sectionGeneralText,"您可以使用以下链接口令来链接此账号到机器人。请注意：这将给予其对您账号完整的控制权！"),r()("p",l.bot_linkCode_displayOrdered?l.bot_linkCode:r()("b","***")),r()(s.ZP.button,{onclick:e=>{l.bot_linkCode_displayOrdered=!l.bot_linkCode_displayOrdered}},l.bot_linkCode_displayOrdered?"隐藏链接口令":"显示链接口令")),r()(s.ZP.section,{title:"登录频率限制"},r()(s.ZP.sectionGeneralText,"为防止软件故障导致的不必要的服务器资源占用，你可能被限制登录频率，你可以在这里将其解除。"),l.is_rate_limited?[r()("p","你被限制了登录频率，请输入验证码解除限制。"),r()("img",{style:{height:"50px",width:"300px"},src:i.Z.GetAPI("captcha")+"&rand="+l.captchaRand}),r()(s.ZP.formInput,{value:l.rate_limit_waiving_captcha,oninput:e=>{l.rate_limit_waiving_captcha=e.target.value}},"验证码"),r()(s.ZP.button,{disabled:l.rate_limit_waiving_in_progress,onclick:()=>{l.rate_limit_waiving_in_progress=!0,(async()=>{let e=await i.Z.WaiveRateLimit(l.rate_limit_waiving_captcha);l.captchaRand=Math.random(),l.rate_limit_waiving_in_progress=!1,e.success?(l.is_rate_limited=!1,r().redraw()):s.ZP.showAlert("失败",e.message)})()}},"解除")]:r()("p","你现在没有受到登录频率限制。")))}};const o=l}}]);